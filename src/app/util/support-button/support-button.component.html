<!-- Main container -->
<section class="fixed left-10 bottom-10 z-50">

  <div class="p-0 flex rounded-2xl items-end justify-center bg-white ring-2 ring-transparent group transition-all duration-300 ease-out shadow-2xl pulse flex flex-col
    {{isOpened ? 'shadow-2xl px-6 pb-4 pt-6 !h-96 ring-blue-500' : ''}}"
    [style.height.px]="accessor.offsetHeight">

    <!--  Section for opened  -->
    <section class="h-full w-full overflow-clip flex flex-col space-y-8" *ngIf="isOpened">

      <div class="w-full flex flex-row justify-end items-center">
        <app-icon class="text-xl hover:cursor-pointer" icon="times" (click)="isOpened = false"></app-icon>
      </div>

      <div class="w-full h-full space-y-8" [formGroup]="formGroup" *ngIf="!isSending">
        <input class="w-full border-x-0 ring-0 outline-none border-solid border-b-2" [formControlName]="FormControlNames.EMAIL" placeholder="youremail@gmail.com">
        <mat-error *ngIf="formGroup.get(FormControlNames.EMAIL).touched && !formGroup.get(FormControlNames.EMAIL).valid">{{getControlErrorMessage(FormControlNames.EMAIL,formGroup)}}</mat-error>

        <textarea class="w-full flex h-20 border-x-0 ring-0 outline-none border-solid border-b-2" [formControlName]="FormControlNames.DESCRIPTION" placeholder="inquiry description and information"></textarea>
        <mat-error *ngIf="formGroup.get(FormControlNames.DESCRIPTION).touched && !formGroup.get(FormControlNames.DESCRIPTION).valid">{{getControlErrorMessage(FormControlNames.DESCRIPTION,formGroup)}}</mat-error>
      </div>

      <div class="w-full h-full justify-center items-center flex" *ngIf="isSending">
        <mat-spinner></mat-spinner>
      </div>

    </section>

    <!--  Un-opened section  -->
    <section #accessor class="flex items-center justify-center hover:cursor-pointer bg-blue-500 hover:bg-blue-600 rounded-full p-2.5 transition-all duration-500 ease-out
      {{isOpened ? 'px-8' : ''}}" (click)="isOpened = true;handleSendEmail()">
      <app-icon class="text-white text-2xl" icon="headphones-alt"></app-icon>

      <!-- Header with transition -->
      <header class="group-hover:ml-4 group-hover:mr-2 opacity-0 max-w-0 group-hover:opacity-100 h-4 flex font-bold font-quicksand truncate text-white justify-center overflow-clip items-center group-hover:max-w-xs transition-all duration-500 ease-in-out
        {{isOpened ? 'ml-4 mr-2 opacity-100 max-w-xs' : ''}}">Contact us</header>
    </section>

  </div>

</section>
